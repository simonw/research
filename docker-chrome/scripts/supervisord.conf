[supervisord]
nodaemon=true
user=root

[program:xvfb]
command=Xvfb :0 -screen 0 1920x1080x24
autorestart=true

[program:selkies]
command=/entrypoint.sh
autorestart=true

[program:chrome]
command=google-chrome-stable --no-sandbox --disable-dev-shm-usage --remote-debugging-port=9222 --remote-debugging-address=0.0.0.0 --load-extension=/opt/extension --start-maximized --no-first-run --no-default-browser-check --user-data-dir=/tmp/chrome-data --window-position=0,0 --window-size=1920,1080
autorestart=true
environment=DISPLAY=":0"
depends_on=xvfb

[program:server]
command=node /opt/server/index.js
autorestart=true
environment=CDP_PORT=9222
depends_on=chrome
